<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>HouseKnightMK0</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap-theme.min.css">
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="stylesheets/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        <div>
            <h1 id="">House Knight MK.0</h1>
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#main" aria-controls="main" role="tab" data-toggle="tab">Main</a></li>
                <li role="presentation"><a href="#control" aria-controls="profile" role="tab" data-toggle="tab">Control</a></li>
                <li role="presentation"><a href="#log" aria-controls="messages" role="tab" data-toggle="tab">Log</a></li>
            </ul>


            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="main">
                    <span>House Status : </span><span id="houseStatus">Normal</span>
                    <div><span>Predicted Threats</span>
                        <br/>
                        <textarea id="threats"></textarea>
                    </div>
                    <div>
                        <span>Motion</span>
                        <progress id="motion-intensity">0</progress>
                        <br/>
                        <span>Noise</span>
                        <progress id="noise-intensity">0</progress>
                        <br/>
                        <span>Temperature</span>
                        <progress id="motion-intensity">0</progress>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="control">
                    <span>State: </span><span id="robot-state">Standby</span>
                    <br/>
                    <button id="guard-em">Guard the current area</button>
                    <button id="go-patrol">Let's move"</button>
                    <br/>
                    <button id="buzz-em">Make annoying sound</button>
                    <button id="flash-em">Flash some LED light</button>
                    <br/>
                    <span>Patrolling Interval: </span>
                    <input disabled id="patrol-time"/>
                    <span>sec</span>
                    <button id="ptime-edit">Edit</button>
                    <br/>
                    <span>Guarding Interval: </span>
                    <input disabled id="guard-time"/>
                    <span>sec</span>
                    <button id="gtime-edit">Edit</button>
                    <br/>
                    <span>Cycle Time: </span>
                    <span id="cycle-time">80</span>
                    <span>sec</span>
                    <br/>
                    <button id="setup">START SETUP MODE</button>
                </div>
                <div role="tabpanel" class="tab-pane" id="log">
                    <span>History</span>
                    <br/>
                    <textarea id="history"></textarea>
                </div>
            </div>

        </div>
    </div>
    <script type="text/javascript">
    var robotState = $('#robot-state');
    var currentCommand = '';
    var state = 0;
    var patrol = 0;
    var guard = 0;
    var motion = 0;
    var noise = 0;
    var temp = 0;
    var buzz = 0;
    var light = 0;
    var cycle = 0;
    setInterval(function() {
      $.ajax({
        url: 'http://10.32.176.4/chemical-x'
    })
    .done(function(data) {
        if (currentCommand !== data) {
            var dataValue = data.split(" ");
            state = parseInt(dataValue[0]);
            patrol = parseInt(dataValue[1]);
            guard = parseInt(dataValue[2]);
            motion = parseInt(dataValue[3]);
            noise = parseInt(dataValue[4]);
            temp = parseInt(dataValue[5]);
            buzz = parseInt(dataValue[6]);
            light = parseInt(dataValue[7]);
            cycle = parseInt(dataValue[8]);
            if(state === 0) {
              robotState.text("Standby");
            } else if(state === 1) {
              robotState.text("Patrolling");
            } else if(state === 1) {
              robotState.text("Patrolling");
            } else if(state === 1) {
              robotState.text("Patrolling");
            } else if(state === 1) {
              robotState.text("Patrolling");
            } else {
              robotState.text("undefined");
            }
        }
    });
    },1000)


    </script>
</body>

</html>
